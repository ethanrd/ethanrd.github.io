#
# GitHub Actions Workflow for pull request events against the master branch to
# make sure Jekyll still builds. If successful, the resulting html files are
# uploaded as artifacts to make it easier to preview the results of a PR.
#
# For more information on the actions used in this workflow, please see:
#   https://github.com/actions/checkout
#   https://github.com/marketplace/actions/gha-jekyll-build
#   https://github.com/actions/upload-artifact
#
name: Check Jekyll Build
on:
  pull_request:
    branches: [ master ]

jobs:
  # Job to test that web page docs build
  jekyll_build:
    name: Jekyll build of web page docs
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name Create build directory
        run: mkdir -v web_pages_build

      # Build HTML from Markdown in repo
      - name: Build site with Jekyll
        uses: gha-utilities/jekyll-build@v0.0.2
        with:
          source: ./
          destination: ./web_pages_build/

      # Upload artifact containing cf-conventions.html, cf-conventions.pdf
      - name: Upload website artifact
        uses: actions/upload-artifact@v1
        with:
          name: Compiled Jekyll Pages
          path: ./web_pages_build/